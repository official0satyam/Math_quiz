<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Class 12 ‚Äì Application of Derivatives Quiz</title>
<style>
  :root{
    --brand:#ff7e00;         /* orange */
    --brand-2:#ffb347;       /* light orange */
    --brand-3:#ff7eb3;       /* pink */
    --glass-bg: rgba(255,255,255,0.14);
    --glass-stroke: rgba(255,255,255,0.35);
    --text: #ffffff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    min-height:100vh;
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 20% 0%, rgba(255,255,255,.20), transparent 60%),
      linear-gradient(120deg, #ff7e5f, #feb47b 45%, #ff7eb3 100%);
    overflow:hidden;
    display:flex; align-items:center; justify-content:center;
    padding:16px;
  }

  /* BG layer for parallax */
  #bg{
    position:fixed; inset:0; overflow:hidden; z-index:0;
    will-change: transform;
  }
  .float-icon{
    position:absolute; font-weight:800; opacity:.16; user-select:none; pointer-events:none;
    animation: drift var(--dur,12s) linear infinite;
    filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
    white-space:nowrap;
  }
  @keyframes drift{
    from{ transform: translateY(110vh) rotate(0deg) }
    to{   transform: translateY(-120px) rotate(360deg) }
  }

  #fg{ position:relative; z-index:1; width:100%; display:flex; justify-content:center; }

  .card{
    width:min(760px, 96vw);
    background: var(--glass-bg);
    border: 1px solid var(--glass-stroke);
    backdrop-filter: blur(12px);
    border-radius: 18px;
    box-shadow: 0 10px 40px rgba(0,0,0,.25);
    padding: clamp(16px, 4vw, 28px);
  }
  .title{
    display:flex; align-items:center; gap:10px; margin:0 0 12px 0;
    font-weight:900; letter-spacing:.2px; font-size: clamp(18px, 3.6vw, 26px);
  }
  .progress-wrap{margin: 8px 0 18px 0;}
  .progress{
    width:100%; height:10px; border-radius:999px; background:rgba(255,255,255,.25); overflow:hidden;
  }
  .bar{
    height:100%; width:0%;
    background: linear-gradient(90deg, #fff, var(--brand), var(--brand-2));
    transition: width .35s ease;
  }

  .qno{opacity:.9; font-weight:800; margin-bottom:6px}
  .question{font-size: clamp(16px, 3.2vw, 20px); line-height:1.45; margin: 6px 0 10px 0}

  .image{
    display:flex; justify-content:center; align-items:center;
    background: rgba(255,255,255,.10);
    border:1px dashed rgba(255,255,255,.35);
    border-radius:14px; padding:10px; margin: 8px 0 14px 0;
  }
  .image svg{max-width: 420px; width:100%; height:auto}

  .options{display:grid; gap:10px}
  .btn{
    appearance:none; border:none; border-radius:12px;
    padding:12px 14px; font-size:16px; font-weight:800; color:#fff;
    background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(0,0,0,.15));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 6px 14px rgba(0,0,0,.2);
    cursor:pointer; text-align:left;
    transform: translateY(6px); opacity:0;
    animation: fadeInUp .38s ease forwards;
  }
  .btn:hover{ transform: translateY(0) scale(1.01); box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 10px 18px rgba(0,0,0,.25) }
  .btn.correct{ background: linear-gradient(180deg, rgba(46, 204, 113,.8), rgba(39,174,96,.8)) }
  .btn.wrong{ background: linear-gradient(180deg, rgba(231, 76, 60,.8), rgba(192,57,43,.8)) }
  @keyframes fadeInUp{ to{opacity:1; transform: translateY(0)} }

  .footer{
    margin-top: 14px;
    display:flex; align-items:center; justify-content:space-between; gap:10px; opacity:.95; font-weight:700;
    font-size:14px;
  }
  .next{
    margin-left:auto;
    background: linear-gradient(90deg, var(--brand), var(--brand-2));
    color:#fff; border:none; border-radius:999px; padding:10px 16px; font-weight:900; cursor:pointer;
    box-shadow: 0 8px 18px rgba(0,0,0,.25);
  }
  .next:disabled{opacity:.5; cursor:not-allowed}

  /* Result modal */
  .modal{
    position:fixed; inset:0; display:none; place-items:center; z-index:5;
    background: rgba(0,0,0,.35);
  }
  .modal-card{
    width:min(560px, 92vw);
    background: rgba(255,255,255,.96);
    color:#333; border-radius:18px; padding:22px; text-align:center;
    box-shadow: 0 16px 40px rgba(0,0,0,.35);
    animation: pop .25s ease;
  }
  @keyframes pop{ from{transform:scale(.92); opacity:0} to{transform:scale(1); opacity:1} }
  .modal .score{
    font-size: clamp(18px, 4vw, 24px); font-weight:900; color:#e65100; margin-bottom:12px;
  }
  .pill{
    display:inline-block; padding:8px 14px; border-radius:999px; background:#ffe0b2; color:#bf360c; font-weight:900;
  }
  .actions{margin-top:16px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
  .action{
    border:none; padding:10px 16px; border-radius:12px; font-weight:900; cursor:pointer;
  }
  .primary{ background: linear-gradient(90deg, var(--brand), var(--brand-2)); color:#fff }
  .ghost{ background:#fff; border:2px solid #ffcc80; color:#e65100 }

  /* Review modal */
  .modal-card .review-title{ font-weight:900; color:#e65100; margin:0 0 8px 0 }
  .review-list{
    margin-top:8px; text-align:left; background:#fff; border-radius:12px; padding:10px;
    max-height:60vh; overflow:auto; border:1px solid #ffd9a6;
  }
  .review-item{ padding:10px 6px; border-bottom:1px dashed #eee }
  .review-item:last-child{ border-bottom:none }
  .tag{ display:inline-block; padding:2px 8px; border-radius:999px; font-weight:800; font-size:12px; }
  .tag.correct{ background:#e8f5e9; color:#2e7d32; border:1px solid #a5d6a7 }
  .tag.wrong{ background:#ffebee; color:#c62828; border:1px solid #ef9a9a }

  @media (max-width:420px){
    .options{gap:8px}
    .btn{font-size:15px; padding:11px 12px}
  }
</style>
</head>
<body>

<!-- Floating maths icons (parallax) -->
<div id="bg">
  <div class="float-icon" style="left:6%;   top:-10%; font-size:40px; --dur:13s;">‚àë</div>
  <div class="float-icon" style="left:18%;  top:-25%; font-size:54px; --dur:16s;">œÄ</div>
  <div class="float-icon" style="left:33%;  top:-15%; font-size:46px; --dur:12s;">‚àö</div>
  <div class="float-icon" style="left:56%;  top:-35%; font-size:52px; --dur:15s;">‚à´</div>
  <div class="float-icon" style="left:78%;  top:-20%; font-size:42px; --dur:14s;">¬±</div>
  <div class="float-icon" style="left:92%;  top:-30%; font-size:50px; --dur:17s;">√ó</div>
</div>

<!-- Foreground quiz -->
<div id="fg">
  <div class="card" id="card">
    <div class="title">üìò Class 12 ‚Äî Application of Derivatives</div>

    <div class="progress-wrap">
      <div class="progress"><div class="bar" id="bar"></div></div>
    </div>

    <div class="qno" id="qno"></div>
    <div class="question" id="question"></div>
    <div class="image" id="image" style="display:none"></div>
    <div class="options" id="options"></div>

    <div class="footer">
      <div id="status">Score: <b id="score">0</b></div>
      <button class="next" id="next" disabled>Next ‚ñ∂</button>
    </div>
  </div>
</div>

<!-- Result modal (now with 3 buttons) -->
<div class="modal" id="modal">
  <div class="modal-card">
    <div class="score" id="finalScore">Your score</div>
    <div class="pill" id="summary">‚Äî</div>
    <div class="actions">
      <button class="action primary" onclick="restart()">üîÑ Play Again</button>
      <button class="action ghost" onclick="openReview()">üìñ Review Answers</button>
      <button class="action ghost" onclick="goHome()">üè† Home</button>
    </div>
  </div>
</div>

<!-- Review modal -->
<div class="modal" id="reviewModal">
  <div class="modal-card">
    <h3 class="review-title">üìñ Review Answers</h3>
    <div class="review-list" id="reviewList"></div>
    <div class="actions">
      <button class="action primary" onclick="restart()">üîÑ Play Again</button>
      <button class="action ghost" onclick="closeReview()">Close</button>
      <button class="action ghost" onclick="goHome()">üè† Home</button>
    </div>
  </div>
</div>

<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
/* ===================== EDIT THIS: Home button link ===================== */
const HOME_URL = "https://sites.google.com/view/satyam-career/home"; // <‚Äî Replace with your site link
/* ======================================================================= */

/* ---------- Small inline SVG diagrams ---------- */
const svg = {
  parabola: `
    <svg viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="g" x1="0" x2="1">
          <stop offset="0" stop-color="#fff" stop-opacity=".6"/>
          <stop offset="1" stop-color="#fff" stop-opacity=".9"/>
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" rx="10" fill="url(#g)" opacity=".08"/>
      <g transform="translate(20,10)">
        <line x1="0" y1="140" x2="260" y2="140" stroke="#fff" stroke-opacity=".6"/>
        <line x1="130" y1="0" x2="130" y2="160" stroke="#fff" stroke-opacity=".6"/>
        <path d="M 10 140 Q 130 10 250 140" fill="none" stroke="#ffecb3" stroke-width="3"/>
        <circle cx="190" cy="62" r="4" fill="#fff"/>
        <text x="196" y="58" fill="#fff" font-size="12">x=3</text>
      </g>
    </svg>`,
  circle: `
    <svg viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" rx="10" fill="#fff" opacity=".08"/>
      <g transform="translate(150,90)">
        <circle r="60" fill="none" stroke="#ffecb3" stroke-width="3"/>
        <line x1="0" y1="0" x2="60" y2="0" stroke="#fff"/>
        <text x="30" y="-6" fill="#fff" font-size="12">r</text>
      </g>
    </svg>`,
  square: `
    <svg viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" rx="10" fill="#fff" opacity=".08"/>
      <rect x="90" y="30" width="120" height="120" fill="none" stroke="#ffecb3" stroke-width="3"/>
      <text x="150" y="26" text-anchor="middle" fill="#fff" font-size="12">side = s</text>
    </svg>`,
  rect: `
    <svg viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" rx="10" fill="#fff" opacity=".08"/>
      <rect x="60" y="50" width="180" height="80" fill="none" stroke="#ffecb3" stroke-width="3"/>
      <text x="150" y="46" text-anchor="middle" fill="#fff" font-size="12">x</text>
      <text x="48" y="95" text-anchor="end" fill="#fff" font-size="12">16/x</text>
    </svg>`,
  line: `
    <svg viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" rx="10" fill="#fff" opacity=".08"/>
      <g transform="translate(20,10)">
        <line x1="0" y1="140" x2="260" y2="140" stroke="#fff" stroke-opacity=".6"/>
        <line x1="130" y1="0" x2="130" y2="160" stroke="#fff" stroke-opacity=".6"/>
        <path d="M 0 160 L 260 40" stroke="#ffecb3" stroke-width="3" fill="none"/>
        <circle cx="170" cy="80" r="4" fill="#fff"/>
        <text x="176" y="76" fill="#fff" font-size="12">x=1</text>
      </g>
    </svg>`
};

/* ============================================================
   QUIZ QUESTIONS ‚Äî CHANGE BELOW (edit q/options/answer/img)
   Tip: answer must exactly match one of the options strings.
   Optional: add img: svg.parabola (or circle/square/rect/line)
   ============================================================ */
const questions = [
  { question: "Find the slope of the tangent to y = x¬≤ at x = 3.", options: ["3","6","9","12"], answer: "6", img: svg.parabola },
  { question: "If radius of a circle increases at 2 cm/s, find the rate of change of area when r = 7 cm.", options: ["28œÄ cm¬≤/s","14œÄ cm¬≤/s","21œÄ cm¬≤/s","49œÄ cm¬≤/s"], answer: "28œÄ cm¬≤/s", img: svg.circle },
  { question: "Find dy/dx at x = 2 for y = 3x¬≤.", options: ["6","9","12","8"], answer: "12" },
  { question: "For f(x) = x¬≤ ‚àí 4x + 5, the function is decreasing in which interval?", options: ["x > 2","x < 2","x = 2","None"], answer: "x < 2" },
  { question: "The maximum value of y = ‚àíx¬≤ + 4x occurs at:", options: ["x = 0","x = 1","x = 2","x = 4"], answer: "x = 2" },
  { question: "Find the equation of the tangent to y = 2x + 3 at x = 1.", options: ["y = 2x + 1","y = 2x + 5","y = x + 3","y = 2x ‚àí 1"], answer: "y = 2x + 5", img: svg.line },
  { question: "If each side of a square increases at 5 cm/s, find the rate of change of area when side = 4 cm.", options: ["20 cm¬≤/s","25 cm¬≤/s","40 cm¬≤/s","50 cm¬≤/s"], answer: "40 cm¬≤/s", img: svg.square },
  { question: "What value of x minimizes P = x + 16/x for x > 0?", options: ["2","4","6","8"], answer: "4", img: svg.rect },
  { question: "Use linear approximation of f(x)=‚àöx near x=36 to estimate ‚àö36.5.", options: ["6.01","6.02","6.03","6.04"], answer: "6.02" },
  { question: "If dy/dx = 0 at x = 3, then at x = 3 the function has:", options: ["Maximum","Minimum","Turning point","Cannot say without more info"], answer: "Cannot say without more info" },
      

];
/* ================================
   END QUIZ QUESTIONS
   ================================ */

/* ---------- WebAudio tiny SFX (works after first tap) ---------- */
let audioReady = false, ctx, masterGain;
function initAudio(){
  if(audioReady) return;
  try{
    ctx = new (window.AudioContext || window.webkitAudioContext)();
    masterGain = ctx.createGain(); masterGain.gain.value = 0.32; masterGain.connect(ctx.destination);
    audioReady = true;
  }catch(e){ audioReady = false; }
}
function tone(freq=660, dur=0.12, type='sine'){
  if(!audioReady) return;
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.setValueAtTime(0.0001, ctx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.6, ctx.currentTime+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+dur);
  o.connect(g); g.connect(masterGain);
  o.start(); o.stop(ctx.currentTime+dur);
}
const sfx = {
  click(){ tone(520, .07, 'triangle'); },
  correct(){ tone(740, .10, 'sine'); setTimeout(()=>tone(980,.12,'sine'), 110); },
  wrong(){ tone(180, .18, 'square'); },
  finish(){ tone(660,.12,'sine'); setTimeout(()=>tone(880,.12,'sine'),130); setTimeout(()=>tone(1040,.16,'triangle'),260); }
};

/* ---------- Quiz Logic + Review ---------- */
let i = 0, score = 0, locked = false;
let userAnswers = []; // stores {q, selected, correct}

const elQno = document.getElementById('qno');
const elQ = document.getElementById('question');
const elImg = document.getElementById('image');
const elOpts = document.getElementById('options');
const elScore = document.getElementById('score');
const elBar = document.getElementById('bar');
const elNext = document.getElementById('next');
const elModal = document.getElementById('modal');
const elFinal = document.getElementById('finalScore');
const elSummary = document.getElementById('summary');
const elReviewModal = document.getElementById('reviewModal');
const elReviewList = document.getElementById('reviewList');

function render(){
  const q = questions[i];
  elQno.textContent = `Question ${i+1} of ${questions.length}`;
  elQ.textContent = q.q;

  if(q.img){ elImg.style.display=''; elImg.innerHTML = q.img; }
  else { elImg.style.display='none'; elImg.innerHTML=''; }

  elOpts.innerHTML = '';
  q.options.forEach((opt, idx)=>{
    const b = document.createElement('button');
    b.className = 'btn';
    b.style.animationDelay = `${idx*0.06 + 0.04}s`; // staggered fade-in
    b.textContent = opt;
    b.onclick = ()=>select(opt, b);
    elOpts.appendChild(b);
  });

  elBar.style.width = ((i)/questions.length*100).toFixed(1)+'%';
  elNext.disabled = true;
  locked = false;
}

function select(opt, btn){
  initAudio();
  if(locked) return;
  sfx.click();
  locked = true;

  const correct = opt === questions[i].answer;
  userAnswers.push({ q: questions[i].q, selected: opt, correct: questions[i].answer });

  if(correct){ score++; btn.classList.add('correct'); sfx.correct(); }
  else{ btn.classList.add('wrong'); sfx.wrong(); }

  [...elOpts.children].forEach(b=>{
    if(b.textContent === questions[i].answer) b.classList.add('correct');
    b.disabled = true;
  });

  elScore.textContent = score;
  elNext.disabled = false;
}

elNext.addEventListener('click', ()=>{
  i++;
  if(i < questions.length){ render(); }
  else{ finish(); }
});

function finish(){
  sfx.finish();
  elBar.style.width = '100%';
  confetti({particleCount: 160, spread: 72, origin:{y:.7}});
  setTimeout(()=>confetti({particleCount: 120, spread: 100, origin:{y:.2}}), 180);

  elFinal.textContent = `üéâ Quiz Completed!`;
  elSummary.textContent = `You scored ${score} out of ${questions.length}`;
  elModal.style.display = 'grid';
}

function restart(){
  elModal.style.display = 'none';
  elReviewModal.style.display = 'none';
  i = 0; score = 0; userAnswers = [];
  elScore.textContent = score;
  render();
}

function openReview(){
  // build review list
  elReviewList.innerHTML = '';
  userAnswers.forEach((a, idx)=>{
    const div = document.createElement('div');
    const isCorrect = a.selected === a.correct;
    div.className = 'review-item';
    div.innerHTML = `
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
        <div style="font-weight:800;">Q${idx+1}</div>
        <span class="tag ${isCorrect?'correct':'wrong'}">${isCorrect?'Correct':'Wrong'}</span>
      </div>
      <div style="margin:6px 0 4px 0; color:#333; font-weight:700;">${a.q}</div>
      <div style="font-size:14px; color:#444;">Your answer: <b style="color:${isCorrect?'#2e7d32':'#c62828'}">${a.selected}</b></div>
      <div style="font-size:14px; color:#444;">Correct answer: <b style="color:#2e7d32">${a.correct}</b></div>
    `;
    elReviewList.appendChild(div);
  });
  elModal.style.display = 'none';
  elReviewModal.style.display = 'grid';
}
function closeReview(){
  elReviewModal.style.display = 'none';
  elModal.style.display = 'grid';
}

function goHome(){
  window.open("https://sites.google.com/view/satyam-career/home" , "_blank") // ‚Üê edit the link at the top
}

// Start quiz
render();
// First tap initializes audio (mobile)
window.addEventListener('pointerdown', initAudio, {once:true});

/* ---------- Subtle Parallax for icons layer (#bg) ---------- */
(function(){
  const bg = document.getElementById('bg');
  function applyParallax(xRatio, yRatio){
    const x = (xRatio - 0.5) * 16;
    const y = (yRatio - 0.5) * 12;
    bg.style.transform = `translate3d(${x}px, ${y}px, 0)`;
  }
  window.addEventListener('pointermove', (e)=>{
    const xRatio = e.clientX / window.innerWidth;
    const yRatio = e.clientY / window.innerHeight;
    applyParallax(xRatio, yRatio);
  }, {passive:true});
  window.addEventListener('deviceorientation', (e)=>{
    if(e && typeof e.beta === 'number' && typeof e.gamma === 'number'){
      const xRatio = (e.gamma + 45) / 90;
      const yRatio = (e.beta  + 45) / 90;
      applyParallax(Math.min(Math.max(xRatio,0),1), Math.min(Math.max(yRatio,0),1));
    }
  });
})();
</script>
</body>
</html>
